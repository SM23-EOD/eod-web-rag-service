# eod-web-rag-service

Cliente web y herramientas para interactuar con el asistente RAG de Envios23.

## ğŸš€ Quick Start

```bash
# Instalar dependencias
npm install

# Iniciar servidor de desarrollo
npm run dev
```

Abre http://localhost:3000 para ver la demo.

---

## ğŸ’¬ Formas de Usar el API RAG

Este proyecto ofrece **5 formas diferentes** de interactuar con el API RAG:

### 1ï¸âƒ£ Widget Embebible
Widget pequeÃ±o tipo chat flotante para integrar en cualquier web.

### 2ï¸âƒ£ Interfaz Web Completa
PÃ¡gina completa estilo ChatGPT con historial y sesiones.

### 3ï¸âƒ£ Open WebUI
Interfaz tipo ChatGPT auto-hospedada con mÃºltiples caracterÃ­sticas.

### 4ï¸âƒ£ LibreChat
Cliente de chat multi-modelo avanzado.

### 5ï¸âƒ£ CLI (LÃ­nea de Comandos)
Scripts para usar desde terminal (Bash y Python).

---

## ğŸ“¦ OpciÃ³n 1: Widget Embebible

Integra un chat flotante en tu sitio web:

```html
<!-- Opcional: Marked.js para renderizar markdown -->
<script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>

<!-- Widget -->
<script src="path/to/assistant-widget.js"></script>

<!-- Componente -->
<rag-assistant
  endpoint="https://api.envios23.com/api/v1/mcp/tools/call"
  title="Asistente Envios23"
></rag-assistant>
```

### âš™ï¸ Atributos del Widget

| Atributo | DescripciÃ³n | Default |
|----------|-------------|---------|
| `endpoint` | URL del endpoint MCP | `/api/v1/mcp/tools/call` |
| `title` | TÃ­tulo del widget | `Asistente` |
| `tool-name` | Herramienta MCP | `generate_rag_answer` |
| `session-id` | ID de sesiÃ³n | `web` |
| `include-sources` | Incluir fuentes | `true` |
| `placeholder` | Placeholder del input | `Escribe tu pregunta...` |

---

## ğŸ’¬ OpciÃ³n 2: Interfaz Web Completa (ChatGPT-like)

Interfaz de pÃ¡gina completa con historial de conversaciones:

```bash
# Acceder a la interfaz completa
open http://localhost:3000/chat-interface.html
```

**CaracterÃ­sticas:**
- âœ… DiseÃ±o similar a ChatGPT
- âœ… Historial de conversaciones
- âœ… Persistencia en localStorage
- âœ… Soporte para Markdown
- âœ… Fuentes de informaciÃ³n

---

## ğŸŒ OpciÃ³n 3: Open WebUI

Interfaz web tipo ChatGPT con caracterÃ­sticas avanzadas:

```bash
# Iniciar Open WebUI con docker-compose
docker-compose --profile chat up open-webui

# Acceder
open http://localhost:3001
```

**ConfiguraciÃ³n:**
- Usuario por defecto se crea en el primer acceso
- Configurar API endpoint en Settings > Connections
- URL: `http://host.docker.internal:8000`

---

## ğŸ’¼ OpciÃ³n 4: LibreChat

Cliente de chat multi-modelo mÃ¡s completo:

```bash
# Iniciar LibreChat con docker-compose
docker-compose --profile chat up librechat mongodb

# Acceder
open http://localhost:3002
```

**ConfiguraciÃ³n:**
- Registrar cuenta en el primer acceso
- Seleccionar "Envios23 RAG" en el menÃº de modelos
- ConfiguraciÃ³n definida en `librechat-config.yaml`

---

## ğŸ–¥ï¸ OpciÃ³n 5: CLI (LÃ­nea de Comandos)

### Script Bash

```bash
# Hacer ejecutable
chmod +x cli/rag-chat.sh

# Uso simple
./cli/rag-chat.sh "Â¿CÃ³mo rastrear un envÃ­o?"

# Modo interactivo
./cli/rag-chat.sh --interactive

# Con API personalizada
RAG_API_URL=https://api.envios23.com ./cli/rag-chat.sh "tu pregunta"
```

### Script Python

```bash
# Instalar dependencias
pip install requests

# Uso simple
python cli/rag-chat.py "Â¿CÃ³mo rastrear un envÃ­o?"

# Modo interactivo
python cli/rag-chat.py --interactive

# Ver ayuda
python cli/rag-chat.py --help

# Con API personalizada
RAG_API_URL=https://api.envios23.com python cli/rag-chat.py "tu pregunta"
```

### Variables de Entorno para CLI

| Variable | DescripciÃ³n | Default |
|----------|-------------|---------|
| `RAG_API_URL` | URL del API RAG | `http://localhost:8000` |
| `TOOL_NAME` | Nombre del tool MCP | `generate_rag_answer` |
| `SESSION_ID` | ID de sesiÃ³n | `cli-$USER` |
| `INCLUDE_SOURCES` | Incluir fuentes | `true` |

---

## ğŸ³ Docker Compose

El proyecto incluye mÃºltiples servicios en `docker-compose.yml`:

```bash
# Widget - Desarrollo
docker-compose --profile dev up

# Widget - ProducciÃ³n
docker-compose --profile prod up

# Interfaces de Chat (Open WebUI + LibreChat)
docker-compose --profile chat up
```

### Puertos

| Servicio | Puerto | URL |
|----------|--------|-----|
| Widget (dev) | 3000 | http://localhost:3000 |
| Widget (prod) | 8080 | http://localhost:8080 |
| Open WebUI | 3001 | http://localhost:3001 |
| LibreChat | 3002 | http://localhost:3002 |

---

## ğŸ“‹ ComparaciÃ³n de Opciones

| CaracterÃ­stica | Widget | Chat Interface | Open WebUI | LibreChat | CLI |
|----------------|--------|----------------|------------|-----------|-----|
| Embebible | âœ… | âŒ | âŒ | âŒ | âŒ |
| Historial | âŒ | âœ… | âœ… | âœ… | âŒ |
| Multi-sesiÃ³n | âŒ | âœ… | âœ… | âœ… | âœ… |
| Auto-hospedado | âœ… | âœ… | âœ… | âœ… | âœ… |
| Sin instalaciÃ³n | âœ… | âœ… | âŒ | âŒ | âŒ |
| Modo CLI | âŒ | âŒ | âŒ | âŒ | âœ… |
| Complejidad | Baja | Baja | Media | Alta | Baja |

## ğŸ”— Requisitos

Requiere el backend [eod-api-rag-service](https://github.com/SM23-EOD/eod-api-rag-service) con el endpoint MCP habilitado.

## ğŸ“„ Licencia

MIT
